library(hms)
#clean_data[["OCCUR_TIME"]] <- clean_data[["OCCUR_TIME"]] |> as_hms()
clean_data |> distinct(LOCATION_DESC)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data[clean_data == "(null)"] <- NA
clean_data[clean_data == "NONE"] <- NA
clean_data |> distinct(VIC_AGE_GROUP)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data[clean_data == "UNKNOWN"] <- NA
clean_data |> distinct(LOC_CLASSFCTN_DESC)
clean_data[clean_data == "OTHER"] <- NA
clean_data |> distinct(PERP_SEX)
clean_data |> distinct(VIC_SEX)
clean_data[clean_data == "U"] <- NA
clean_data |> distinct(VIC_AGE_GROUP)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data <- clean_data |>
mutate(VIC_AGE_GROUP = ifelse(!VIC_AGE_GROUP %in% c("<18", "18-24", "25-44", "45-64", "65+"), NA, VIC_AGE_GROUP),
PERP_AGE_GROUP = ifelse(!PERP_AGE_GROUP %in% c("<18", "18-24", "25-44", "45-64", "65+"), NA, PERP_AGE_GROUP))
clean_data |> distinct(LOCATION_DESC)
clean_data <- clean_data |>
mutate(LOCATION_DESC = recode(LOCATION_DESC, "MULTI DWELL - PUBLIC HOUS" =  "MULTI DWELL - PUBLIC HOUSE",
"SOCIAL CLUB/POLICY LOCATI" = "SOCIAL CLUB/POLICY LOCATION"))
basic_info <- clean_data |>
summarise("Name of the file" = gsub(".csv","", list.files("data")),
"File content" = "Reported shooting incidents in New York City",
"Number of observations" = nrow(clean_data),
"Number of variables" = ncol(clean_data),
"Date of first observation" = last(OCCUR_DATE),
"Date of last observation" = first(OCCUR_DATE),
"Number of numerical variables" = length(select_if(clean_data,is.numeric)),
"Number of character variables" = length(select_if(clean_data,is.character)),
"Number of logical variables" = length(select_if(clean_data,is.logical)),
"Number of time variables" = length(select_if(clean_data,is_hms)),
"Proportion of missing values" = (sum(is.na(clean_data)))/((nrow(clean_data))*(ncol(clean_data))))
knitr::kable(basic_info)
library(ggplot2)
clean_data |>
ggplot(aes(x=Longitude, y=Latitude, color=BORO))+
geom_point() +
labs(title = "Locations of shooting incidents in New York City, 2006-2022")
clean_data |>
drop_na |>
ggplot(aes(x=Longitude, y=Latitude, color=BORO))+
geom_point() +
labs(title = "Locations of shooting incidents in New York City, 2006-2022")
clean_data |>
ggplot(aes(x=Longitude, y=Latitude, color=BORO))+
geom_point() +
labs(title = "Locations of shooting incidents in New York City, 2006-2022")
clean_data |>
ggplot(aes(x=Longitude, y=Latitude, color=BORO))+
geom_point(rm.na = TRUE) +
labs(title = "Locations of shooting incidents in New York City, 2006-2022")
clean_data |>
ggplot(aes(x=Longitude, y=Latitude, color=BORO, rm.na = TRUE))+
geom_point() +
labs(title = "Locations of shooting incidents in New York City, 2006-2022")
clean_data |>
filter(!is.na(Longitude) & !is.na(Latitude)) |>
ggplot(aes(x=Longitude, y=Latitude, color=BORO))+
geom_point() +
labs(title = "Locations of shooting incidents in New York City, 2006-2022")
View(NYPD_Shooting_Incident_Data_Historic)
View(NYPD_Shooting_Incident_Data_Historic)
View(clean_data)
clean_data |>
ggplot(aes(x = OCCUR_DATE)) +
geom_density()
clean_data |>
ggplot(aes(x = OCCUR_DATE)) +
geom_line()
clean_data |>
group_by(OCCUR_DATE) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = OCCCUR_DATE, y = `Shooting incidents`)) +
geom_line()
clean_data |>
group_by(OCCUR_DATE) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = OCCUR_DATE, y = `Shooting incidents`)) +
geom_line()
clean_data |>
select(OCCUR_DATE) |>
group_by(gsub(".*/", "", OCCUR_DATE)) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = OCCUR_DATE, y = `Shooting incidents`)) +
geom_line()
clean_data |>
group_by(gsub(".*/", "", OCCUR_DATE)) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = OCCUR_DATE, y = `Shooting incidents`)) +
geom_line()
clean_data |>
group_by(gsub(".*/", "", clean_data$OCCUR_DATE)) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = OCCUR_DATE, y = `Shooting incidents`)) +
geom_line()
clean_data |>
group_by(substr(OCCUR_DATE, 7, 8, 9, 10))) |>
clean_data |>
group_by(substr(OCCUR_DATE, 7, 8, 9, 10)) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = OCCUR_DATE, y = `Shooting incidents`)) +
geom_line()
clean_data |>
group_by(substr(OCCUR_DATE, 9, 10)) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = OCCUR_DATE, y = `Shooting incidents`)) +
geom_line()
clean_data |>
group_by(substr(clean_data$OCCUR_DATE, 9, 10)) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = OCCUR_DATE, y = `Shooting incidents`)) +
geom_line()
clean_data |>
group_by(substr(clean_data$OCCUR_DATE, 9, 10)) |>
summarise("Shooting incidents" = n()) |>
ggplot(clean_data, aes(x = OCCUR_DATE, y = `Shooting incidents`)) +
geom_line()
clean_data |>
group_by(substr(clean_data$OCCUR_DATE, 9, 10)) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = OCCUR_DATE, y = `Shooting incidents`)) +
geom_line()
clean_data |>
mutate("year"=gsub(".*/", "", OCCUR_DATE))
#summarise("Shooting incidents" = n()) |>
#ggplot(aes(x = OCCUR_DATE, y = `Shooting incidents`)) +
#geom_line()
clean_data |>
mutate("year"=gsub(".*/", "", OCCUR_DATE)) |>
select(`year`) |>
group_by(`year`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `year`, y = `Shooting incidents`)) +
geom_line()
clean_data |>
mutate("year"=gsub(".*/", "", OCCUR_DATE)) |>
select(`year`) |>
group_by(`year`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `year`, y = `Shooting incidents`)) +
geom_point()
clean_data |>
mutate("year"=gsub(".*/", "", OCCUR_DATE)) |>
select(`year`) |>
group_by(`year`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `year`, y = `Shooting incidents`)) +
geom_bar()
clean_data |>
mutate("year"=gsub(".*/", "", OCCUR_DATE)) |>
select(`year`) |>
group_by(`year`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `year`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=gsub(".*/*.", "", OCCUR_DATE)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
#| message: FALSE
here::i_am("NewYorkShootings.Rproj")
library(vroom)
raw_data <- vroom("data/NYPD_Shooting_Incident_Data__Historic.csv")
library(dplyr)
clean_data <- raw_data
#In case this issue arises
#clean_data[["OCCUR_TIME"]] |> typeof()
#In case this issue arises
library(hms)
#clean_data[["OCCUR_TIME"]] <- clean_data[["OCCUR_TIME"]] |> as_hms()
clean_data |> distinct(LOCATION_DESC)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data[clean_data == "(null)"] <- NA
clean_data[clean_data == "NONE"] <- NA
clean_data |> distinct(VIC_AGE_GROUP)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data[clean_data == "UNKNOWN"] <- NA
clean_data |> distinct(LOC_CLASSFCTN_DESC)
clean_data[clean_data == "OTHER"] <- NA
clean_data |> distinct(PERP_SEX)
clean_data |> distinct(VIC_SEX)
clean_data[clean_data == "U"] <- NA
clean_data |> distinct(VIC_AGE_GROUP)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data <- clean_data |>
mutate(VIC_AGE_GROUP = ifelse(!VIC_AGE_GROUP %in% c("<18", "18-24", "25-44", "45-64", "65+"), NA, VIC_AGE_GROUP),
PERP_AGE_GROUP = ifelse(!PERP_AGE_GROUP %in% c("<18", "18-24", "25-44", "45-64", "65+"), NA, PERP_AGE_GROUP))
clean_data |> distinct(LOCATION_DESC)
clean_data <- clean_data |>
mutate(LOCATION_DESC = recode(LOCATION_DESC, "MULTI DWELL - PUBLIC HOUS" =  "MULTI DWELL - PUBLIC HOUSE",
"SOCIAL CLUB/POLICY LOCATI" = "SOCIAL CLUB/POLICY LOCATION"))
basic_info <- clean_data |>
summarise("Name of the file" = gsub(".csv","", list.files("data")),
"File content" = "Reported shooting incidents in New York City",
"Number of observations" = nrow(clean_data),
"Number of variables" = ncol(clean_data),
"Date of first observation" = last(OCCUR_DATE),
"Date of last observation" = first(OCCUR_DATE),
"Number of numerical variables" = length(select_if(clean_data,is.numeric)),
"Number of character variables" = length(select_if(clean_data,is.character)),
"Number of logical variables" = length(select_if(clean_data,is.logical)),
"Number of time variables" = length(select_if(clean_data,is_hms)),
"Proportion of missing values" = (sum(is.na(clean_data)))/((nrow(clean_data))*(ncol(clean_data))))
knitr::kable(basic_info)
library(ggplot2)
clean_data |>
filter(!is.na(Longitude) & !is.na(Latitude)) |>
ggplot(aes(x=Longitude, y=Latitude, color=BORO))+
geom_point() +
labs(title = "Locations of shooting incidents in New York City, 2006-2022")
clean_data |>
mutate("year"=gsub(".*/", "", OCCUR_DATE)) |>
select(`year`) |>
group_by(`year`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `year`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=gsub(".*/*.", "", OCCUR_DATE)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 4, 5)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = mean(n())) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/nrow())) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16)) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
recode(`month`,
01 = "Jan",
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
mutate(month = recode(month,
01 = "Jan",
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
recode(month,
01 = "Jan",
View(clean_data)
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16)) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
#| message: FALSE
here::i_am("NewYorkShootings.Rproj")
library(vroom)
raw_data <- vroom("data/NYPD_Shooting_Incident_Data__Historic.csv")
library(dplyr)
clean_data <- raw_data
#In case this issue arises
#clean_data[["OCCUR_TIME"]] |> typeof()
#In case this issue arises
library(hms)
#clean_data[["OCCUR_TIME"]] <- clean_data[["OCCUR_TIME"]] |> as_hms()
clean_data |> distinct(LOCATION_DESC)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data[clean_data == "(null)"] <- NA
clean_data[clean_data == "NONE"] <- NA
clean_data |> distinct(VIC_AGE_GROUP)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data[clean_data == "UNKNOWN"] <- NA
clean_data |> distinct(LOC_CLASSFCTN_DESC)
clean_data[clean_data == "OTHER"] <- NA
clean_data |> distinct(PERP_SEX)
clean_data |> distinct(VIC_SEX)
clean_data[clean_data == "U"] <- NA
clean_data |> distinct(VIC_AGE_GROUP)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data <- clean_data |>
mutate(VIC_AGE_GROUP = ifelse(!VIC_AGE_GROUP %in% c("<18", "18-24", "25-44", "45-64", "65+"), NA, VIC_AGE_GROUP),
PERP_AGE_GROUP = ifelse(!PERP_AGE_GROUP %in% c("<18", "18-24", "25-44", "45-64", "65+"), NA, PERP_AGE_GROUP))
clean_data |> distinct(LOCATION_DESC)
clean_data <- clean_data |>
mutate(LOCATION_DESC = recode(LOCATION_DESC, "MULTI DWELL - PUBLIC HOUS" =  "MULTI DWELL - PUBLIC HOUSE",
"SOCIAL CLUB/POLICY LOCATI" = "SOCIAL CLUB/POLICY LOCATION"))
basic_info <- clean_data |>
summarise("Name of the file" = gsub(".csv","", list.files("data")),
"File content" = "Reported shooting incidents in New York City",
"Number of observations" = nrow(clean_data),
"Number of variables" = ncol(clean_data),
"Date of first observation" = last(OCCUR_DATE),
"Date of last observation" = first(OCCUR_DATE),
"Number of numerical variables" = length(select_if(clean_data,is.numeric)),
"Number of character variables" = length(select_if(clean_data,is.character)),
"Number of logical variables" = length(select_if(clean_data,is.logical)),
"Number of time variables" = length(select_if(clean_data,is_hms)),
"Proportion of missing values" = (sum(is.na(clean_data)))/((nrow(clean_data))*(ncol(clean_data))))
knitr::kable(basic_info)
library(ggplot2)
clean_data |>
filter(!is.na(Longitude) & !is.na(Latitude)) |>
ggplot(aes(x=Longitude, y=Latitude, color=BORO))+
geom_point() +
labs(title = "Locations of shooting incidents in New York City, 2006-2022")
clean_data |>
mutate("year"=gsub(".*/", "", OCCUR_DATE)) |>
select(`year`) |>
group_by(`year`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `year`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16)) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2), `month`= gsub(01, "Jan",
02, "Feb",
03, "Mar",
04, "Apr",
05, "May",
06, "Jun",
07, "Jul",
08, "Aug",
09, "Sep",
10, "Oct",
11, "Nov",
12, "Dec")) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16)) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2), `month`= gsub("01", "Jan",
"02", "Feb",
"03", "Mar",
"04", "Apr",
"05", "May",
"06", "Jun",
"07", "Jul",
"08", "Aug",
"09", "Sep",
"10", "Oct",
"11", "Nov",
"12", "Dec")) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16)) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2), `month`= gsub("01", "Jan", `month`
"02", "Feb", `month`
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2), `month`= gsub("01", "Jan", `month`,
"02", "Feb", `month`,
"03", "Mar", `month`,
"04", "Apr", `month`,
"05", "May", `month`,
"06", "Jun", `month`,
"07", "Jul", `month`,
"08", "Aug", `month`,
"09", "Sep", `month`,
"10", "Oct", `month`,
"11", "Nov", `month`,
"12", "Dec", `month`)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16)) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2), `month`= gsub("01", "Jan", `month`)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16)) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16)) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
View(clean_data)
#| message: FALSE
here::i_am("NewYorkShootings.Rproj")
library(vroom)
raw_data <- vroom("data/NYPD_Shooting_Incident_Data__Historic.csv")
library(dplyr)
clean_data <- raw_data
#In case this issue arises
#clean_data[["OCCUR_TIME"]] |> typeof()
#In case this issue arises
library(hms)
clean_data[["OCCUR_TIME"]] <- clean_data[["OCCUR_TIME"]] |> as_hms()
clean_data[["OCCUR_DATE"]] <- clean_data[["OCCUR_DATE"]] |> as.Date(format="%m/%d/%y")
clean_data |> distinct(LOCATION_DESC)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data[clean_data == "(null)"] <- NA
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16)) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("year"=gsub(".*/", "", OCCUR_DATE)) |>
select(`year`) |>
group_by(`year`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `year`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16)) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
clean_data |>
mutate("year"=gsub(".*/", "", OCCUR_DATE)) |>
select(`year`) |>
group_by(`year`) |>
summarise("Shooting incidents" = n()) |>
ggplot(aes(x = `year`, y = `Shooting incidents`)) +
geom_col()
#| message: FALSE
here::i_am("NewYorkShootings.Rproj")
library(vroom)
#| message: FALSE
raw_data <- vroom("data/NYPD_Shooting_Incident_Data__Historic.csv")
library(dplyr)
clean_data <- raw_data
#In case this issue arises
#clean_data[["OCCUR_TIME"]] |> typeof()
#In case this issue arises
library(hms)
clean_data[["OCCUR_TIME"]] <- clean_data[["OCCUR_TIME"]] |> as_hms()
clean_data[["OCCUR_DATE"]] <- clean_data[["OCCUR_DATE"]] |> as.Date(format="%m/%d/%y")
clean_data |> distinct(LOCATION_DESC)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data[clean_data == "(null)"] <- NA
clean_data |>
mutate("month"=substr(OCCUR_DATE, 1, 2)) |>
select(`month`) |>
group_by(`month`) |>
summarise("Shooting incidents" = (n()/16)) |>
ggplot(aes(x = `month`, y = `Shooting incidents`)) +
geom_col()
#| message: FALSE
here::i_am("NewYorkShootings.Rproj")
library(vroom)
#| message: FALSE
raw_data <- vroom("data/NYPD_Shooting_Incident_Data__Historic.csv")
library(dplyr)
clean_data <- raw_data
#In case this issue arises
#clean_data[["OCCUR_TIME"]] |> typeof()
#In case this issue arises
library(hms)
clean_data[["OCCUR_TIME"]] <- clean_data[["OCCUR_TIME"]] |> as_hms()
clean_data[["OCCUR_DATE"]] <- clean_data[["OCCUR_DATE"]] |> as.Date(format="%m/%d/%y")
clean_data |> distinct(LOCATION_DESC)
clean_data |> distinct(PERP_AGE_GROUP)
clean_data[clean_data == "(null)"] <- NA
