---
title: "NewYorkShootings"
author: "Brian de Korodi & Mariane Modena"
format: html
editor: visual
---

# Gun violence in the Big Apple: How shooting incidents help to tell the story of New York City over the last 15 years.

A city of bright lights and big dreams, New York's history is also one of crime, violence and social inequality. This is why we will attempt to tell the story of New York City through the lens of its shooting incidents.

Through geographical, sociodemographic and temporal aspects of reported shooting incidents in New York City, we attempt to find relevant trends that might align with social and economic developments between 2006 and 2022.

We have found certified data with detailed descriptive characteristics of all reported shooting incidents, including date, time, location, victim and offender's characteristics. This will allow us to summarize the quantity of shooting incidents as a function of these characteristics, along with their evolution over the given timeframe. Where significant patterns reveal themselves, we will attempt to use external information to help explain these patterns in light of various contextual factors, such as political, social, or economic evolutions.Â 

This method, combining descriptive data with contextual information, we hope, will allow us to determine to what extent gun violence incidents are random events, or whether they may be partially explained by larger social and economic forces.

## Click [here](https://github.com/briandekorodi/NewYorkShootings) to access the Github repository

## Click [here](https://catalog.data.gov/dataset/nypd-shooting-incident-data-historic/resource/c564b578-fd8a-4005-8365-34150d306cc4) to access the source

## Description of the source :

The data, found in the official United States open data website, constitutes a list of every New York City shooting incident, reported by the NYPD, from January 1, 2006 to Decemeber 31, 2022. This data is manually extracted every quarter and reviewed by the Office of Management Analysis and Planning before being posted on the NYPD website.

For each observation, corresponding to a unique shooting incident, is provided information relative to the date, time and localisation of the incident, as well as socio-demographic characteristics of the offender and victim.

## Description of the variables :

**INCIDENT_KEY** : Serial number identifying the incident

**OCCUR_DATE** : Date (Month/Day/Year) on which the incident occurred

**OCCUR_TIME** : Time at which the incident occured

**BORO** : Which of the 5 New York City boroughs the incident occurred in (Manhattan, Queens, Brooklyn, Bronx, Staten Island)

**LOC_OF_OCCUR_DESC** : Most general category of location, whether the incident occurred inside ,outside, or unknown

**PRECINCT** : Code identifying which NYPD precinct in which the incident occurred

**JURISDICTION_CODE** : Code identifying the tax jurisdiction territory in which the incident occurred

**LOC_CLASSFCTN_DESC** : Second most general category of location

**LOCATION_DESC** : Third most general category of location

**STATISTICAL_MURDER_FLAG** : TRUE/FALSE variable indicating whether the shooting resulted in a murder

**PERP_AGE_GROUP** : Age range of the offender

**PERP_SEX** : Sex of the offender

**PERP_RACE** : Racial group of the offender

**VIC_AGE_GROUP** : Age range of the victim

**VIC_SEX** : Sex of the victim

**VIC_RACE** : Racial group of the victim

**X_COORD_CD** : Cartesian X coordinate of the location at which the shooting incident occurred

**Y_COORD_CD** : Cartesian Y coordinate of the location at which the shooting incident occurred

**Latitude** : Geographical latitude coordinate of the location at which the shooting incident occurred

**Longitude** : Geographical longitude coordinate of the location at which the shooting incident occurred

**Lon_Lat** : Geographical point, composed of latitude and longitude coordinates, of the location at which the shooting incident occurred

```{r}
#| message: FALSE
here::i_am("NewYorkShootings.Rproj")
```

```{r}
#| message: FALSE
library(vroom)
```

```{r}
raw_data <- vroom("data/NYPD_Shooting_Incident_Data__Historic.csv")
```

## Basic information about the data file :

```{r}
#| message: FALSE
library(dplyr)
```

```{r}
basic_info <- raw_data |>
  summarise("Name of the file" = "NYPD_Shooting_Incident_Data_Historic",
            "Number of observations" = nrow(raw_data),
            "Number of variables" = ncol(raw_data),)
knitr::kable(basic_info)

```

## Data Cleaning

```{r}
raw_data |> distinct(LOCATION_DESC)
```

The dataset contains some missing values for which it is NA and some for which it is "(null)". We replace all the "(null)" values by NA.

```{r}
clean_data <- 
raw_data[raw_data == "(null)"] <- NA
```

The variable OCCUR_TIME has a double type, which is not very readable. We change the format of this variable to the classic format of Hour:Minutes:Seconds.

```{r}
typeof(raw_data$OCCUR_TIME) 
```

The variable OCCUR_TIME has a double type, which is not very readable. We us as_hms to convert it from double to time.

```{r}
library(hms)
raw_data$OCCUR_TIME <- as_hms(raw_data$OCCUR_TIME)
```

```{r}
raw_data |> select(OCCUR_TIME) |> all(as_hms())
```

```{r}
typeof(raw_data$VIC_AGE_GROUP)
```

```{r}
raw_data |> distinct(VIC_AGE_GROUP)
```

```{r}
raw_data[raw_data == "UNKNOWN"] <- NA
```

```{r}
raw_data |> distinct(VIC_AGE_GROUP)
```

```{r}
raw_data$VIC_AGE_GROUP[raw_data$VIC_AGE_GROUP == 1022] <- NA
```

```{r}
raw_data |> distinct(VIC_AGE_GROUP)
```

```{r}
raw_data |> distinct(PERP_AGE_GROUP)
```

```{r}
raw_data$PERP_AGE_GROUP[is.element(raw_data$PERP_AGE_GROUP, c(1020, 940,224))] <- NA

```

```{r}
raw_data |> distinct(PERP_AGE_GROUP)
```

```{r}
raw_data |> distinct(LOC_OF_OCCUR_DESC)
```

```{r}
raw_data |> distinct(LOC_CLASSFCTN_DESC)
```

```{r}
raw_data$LOC_CLASSFCTN_DESC[raw_data$LOC_CLASSFCTN_DESC == "OTHER"] <- NA
```

```{r}
raw_data |> distinct(LOC_CLASSFCTN_DESC)
```

```{r}
raw_data |> distinct(LOCATION_DESC)
```

```{r}
raw_data$LOCATION_DESC[raw_data$LOCATION_DESC == "NONE"] <- NA
```

```{r}
raw_data$LOCATION_DESC[raw_data$LOCATION_DESC == "MULTI DWELL - PUBLIC HOUS"] <- "MULTI DWELL - PUBLIC HOUSE"
raw_data$LOCATION_DESC[raw_data$LOCATION_DESC == "SOCIAL CLUB/POLICY LOCATI"] <- "SOCIAL CLUB/POLICY LOCATION"
```

```{r}
raw_data |> distinct(LOCATION_DESC)
```

```{r}
raw_data |> distinct(STATISTICAL_MURDER_FLAG)
```

```{r}
raw_data |> distinct(PERP_SEX)
```

```{r}
raw_data$PERP_SEX[raw_data$PERP_SEX == "U"] <- NA
```

```{r}
raw_data |> distinct(PERP_SEX)
```

```{r}
raw_data |> distinct(VIC_SEX)
```

```{r}
raw_data$VIC_SEX[raw_data$VIC_SEX == "U"] <- NA
```

```{r}
raw_data |> distinct(VIC_SEX)
```

```{r}
raw_data |> distinct(VIC_RACE)
```

```{r}
raw_data |> distinct(PERP_RACE)
```
